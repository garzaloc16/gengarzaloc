<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Generadores Luhn, Damm y Verhoeff</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #000;
      color: #ccc;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    .generator-container {
      background-color: #111;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 0 10px #0f0a;
    }

    .generator-container h2 {
      font-family: 'Share Tech Mono', monospace;
      color: #00ff88;
      font-size: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    input, button {
      padding: 10px;
      margin: 5px 0;
      font-size: 16px;
      border-radius: 5px;
      border: none;
    }

    input {
      width: 200px;
    }

    button {
      background-color: #00ff88;
      color: #000;
      cursor: pointer;
    }

    button:hover {
      background-color: #00cc66;
    }

    p {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <!-- Generador Luhn -->
  <div class="generator-container">
    <h2>Generador Luhn</h2>
    <input type="text" id="luhnInput" placeholder="Ingresa base numérica" />
    <button onclick="generateLuhn()">Generar</button>
    <p id="luhnResult"></p>
  </div>

  <!-- Generador Damm -->
  <div class="generator-container">
    <h2>Generador Damm</h2>
    <input type="text" id="dammInput" placeholder="Ingresa base numérica" />
    <button onclick="generateDamm()">Generar</button>
    <p id="dammResult"></p>
  </div>

  <!-- Generador Verhoeff -->
  <div class="generator-container">
    <h2>Generador Verhoeff</h2>
    <input type="text" id="verhoeffInput" placeholder="Ingresa base numérica" />
    <button onclick="generateVerhoeff()">Generar</button>
    <p id="verhoeffResult"></p>
  </div>

  <script>
    // Luhn
    function generateLuhn() {
      let input = document.getElementById('luhnInput').value;
      if (!/^\d+$/.test(input)) {
        document.getElementById('luhnResult').textContent = 'Solo se permiten números';
        return;
      }

      let sum = 0, shouldDouble = false;
      for (let i = input.length - 1; i >= 0; i--) {
        let digit = parseInt(input[i]);
        if (shouldDouble) {
          digit *= 2;
          if (digit > 9) digit -= 9;
        }
        sum += digit;
        shouldDouble = !shouldDouble;
      }

      let checkDigit = (10 - (sum % 10)) % 10;
      document.getElementById('luhnResult').textContent = 'Resultado: ' + input + checkDigit;
    }

    // Damm
    const dammTable = [
      [0,3,1,7,5,9,8,6,4,2],
      [7,0,9,2,1,5,4,8,6,3],
      [4,2,0,6,8,7,1,3,5,9],
      [1,7,5,0,9,8,3,4,2,6],
      [6,1,2,3,0,4,5,9,7,8],
      [3,6,7,4,2,0,9,5,8,1],
      [5,8,6,9,7,2,0,1,3,4],
      [8,9,4,5,3,6,2,0,1,7],
      [9,4,3,8,6,1,7,2,0,5],
      [2,5,8,1,4,3,6,7,9,0]
    ];

    function generateDamm() {
      let input = document.getElementById('dammInput').value;
      if (!/^\d+$/.test(input)) {
        document.getElementById('dammResult').textContent = 'Solo se permiten números';
        return;
      }

      let interim = 0;
      for (let i = 0; i < input.length; i++) {
        interim = dammTable[interim][parseInt(input[i])];
      }

      document.getElementById('dammResult').textContent = 'Resultado: ' + input + interim;
    }

    // Verhoeff
    const verhoeffD = [
      [0,1,2,3,4,5,6,7,8,9],
      [1,2,3,4,0,6,7,8,9,5],
      [2,3,4,0,1,7,8,9,5,6],
      [3,4,0,1,2,8,9,5,6,7],
      [4,0,1,2,3,9,5,6,7,8],
      [5,9,8,7,6,0,4,3,2,1],
      [6,5,9,8,7,1,0,4,3,2],
      [7,6,5,9,8,2,1,0,4,3],
      [8,7,6,5,9,3,2,1,0,4],
      [9,8,7,6,5,4,3,2,1,0]
    ];

    const verhoeffP = [
      [0,1,2,3,4,5,6,7,8,9],
      [1,5,7,6,2,8,3,0,9,4],
      [5,8,0,3,7,9,6,1,4,2],
      [8,9,1,6,0,4,3,5,2,7],
      [9,4,5,3,1,2,6,8,7,0],
      [4,2,8,6,5,7,3,9,0,1],
      [2,7,9,3,8,0,6,4,1,5],
      [7,0,4,6,9,1,3,2,5,8]
    ];

    const verhoeffInv = [0,4,3,2,1,5,6,7,8,9];

    function generateVerhoeff() {
      let input = document.getElementById('verhoeffInput').value;
      if (!/^\d+$/.test(input)) {
        document.getElementById('verhoeffResult').textContent = 'Solo se permiten números';
        return;
      }

      let c = 0;
      let reversed = input.split('').reverse().map(Number);
      for (let i = 0; i < reversed.length; i++) {
        c = verhoeffD[c][verhoeffP[(i + 1) % 8][reversed[i]]];
      }

      let checkDigit = verhoeffInv[c];
      document.getElementById('verhoeffResult').textContent = 'Resultado: ' + input + checkDigit;
    }
  </script>
</body>
</html>
