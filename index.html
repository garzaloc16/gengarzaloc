<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Generadores de Tarjetas</title>
  <style>
    body {
      background-color: black;
      color: #00ff00;
      font-family: 'Courier New', monospace;
    }
    .generator-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-around;
      gap: 40px;
      margin: 40px;
    }
    .generator {
      border: 2px solid #00ff00;
      border-radius: 10px;
      padding: 20px;
      width: 300px;
      background-color: #111;
      box-shadow: 0 0 20px #00ff00;
    }
    .generator h2 {
      font-size: 20px;
      text-align: center;
      color: #00ff00;
    }
    textarea, input {
      width: 100%;
      margin-top: 10px;
      background-color: black;
      color: #00ff00;
      border: 1px solid #00ff00;
      font-family: monospace;
    }
    button {
      margin-top: 10px;
      width: 100%;
      background-color: #00ff00;
      color: black;
      font-weight: bold;
      border: none;
      padding: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #33ff33;
    }
  </style>
</head>
<body>

  <div class="generator-container">

    <!-- Generador Luhn -->
    <div class="generator">
      <h2>Generador Luhn</h2>
      <input type="text" id="binLuhn" placeholder="BIN con x (Ej: 532610xxxxxxxxxx)">
      <input type="number" id="cantidadLuhn" placeholder="Cantidad">
      <textarea id="resultadoLuhn" rows="10"></textarea>
      <button onclick="generateLuhn()">Generar</button>
    </div>

    <!-- Generador Damm -->
    <div class="generator">
      <h2>Generador Damm</h2>
      <input type="text" id="binDamm" placeholder="BIN con x (Ej: 532610xxxxxxxxxx)">
      <input type="number" id="cantidadDamm" placeholder="Cantidad">
      <textarea id="resultadoDamm" rows="10"></textarea>
      <button onclick="generateDamm()">Generar</button>
    </div>

    <!-- Generador Verhoeff -->
    <div class="generator">
      <h2>Generador Verhoeff</h2>
      <input type="text" id="binVerhoeff" placeholder="BIN con x (Ej: 532610xxxxxxxxxx)">
      <input type="number" id="cantidadVerhoeff" placeholder="Cantidad">
      <textarea id="resultadoVerhoeff" rows="10"></textarea>
      <button onclick="generateVerhoeff()">Generar</button>
    </div>

  </div>

  <script>
    function generateRandomDate() {
      let month = ('0' + (Math.floor(Math.random() * 12) + 1)).slice(-2);
      let year = (Math.floor(Math.random() * 6) + 25).toString(); // 25-30
      let cvv = ('00' + Math.floor(Math.random() * 1000)).slice(-3);
      return `|${month}|${year}|${cvv}`;
    }

    // Luhn
    function luhnCheck(num) {
      let arr = (num + '').split('').reverse().map(x => parseInt(x));
      let sum = arr.reduce((acc, val, i) =>
        acc + (i % 2 ? ((val *= 2) > 9 ? val - 9 : val) : val), 0);
      return sum % 10 === 0;
    }
    function generateLuhn() {
      let bin = document.getElementById("binLuhn").value;
      let cantidad = parseInt(document.getElementById("cantidadLuhn").value);
      let resultado = [];

      for (let i = 0; i < cantidad; i++) {
        let num = bin;
        while (num.includes('x')) {
          num = num.replace('x', Math.floor(Math.random() * 10));
        }
        if (luhnCheck(num)) {
          resultado.push(num + generateRandomDate());
        } else {
          i--;
        }
      }
      document.getElementById("resultadoLuhn").value = resultado.join('\n');
    }

    // Damm
    const dammTable = [
      [0,3,1,7,5,9,8,6,4,2],
      [7,0,9,2,1,5,4,8,6,3],
      [4,2,0,6,8,7,1,3,5,9],
      [1,7,5,0,9,8,3,4,2,6],
      [6,1,2,3,0,4,5,9,7,8],
      [3,6,7,4,2,0,9,5,8,1],
      [5,8,6,9,7,2,0,1,3,4],
      [8,9,4,5,3,6,2,0,1,7],
      [9,4,3,8,6,1,7,2,0,5],
      [2,5,8,1,4,3,6,7,9,0]
    ];
    function dammCheck(num) {
      let interim = 0;
      for (let i = 0; i < num.length; i++) {
        interim = dammTable[interim][parseInt(num.charAt(i))];
      }
      return interim === 0;
    }
    function generateDamm() {
      let bin = document.getElementById("binDamm").value;
      let cantidad = parseInt(document.getElementById("cantidadDamm").value);
      let resultado = [];

      for (let i = 0; i < cantidad; i++) {
        let num = bin;
        while (num.includes('x')) {
          num = num.replace('x', Math.floor(Math.random() * 10));
        }
        if (dammCheck(num)) {
          resultado.push(num + generateRandomDate());
        } else {
          i--;
        }
      }
      document.getElementById("resultadoDamm").value = resultado.join('\n');
    }

    // Verhoeff
    const verhoeffD = [
      [0,1,2,3,4,5,6,7,8,9],
      [1,2,3,4,0,6,7,8,9,5],
      [2,3,4,0,1,7,8,9,5,6],
      [3,4,0,1,2,8,9,5,6,7],
      [4,0,1,2,3,9,5,6,7,8],
      [5,9,8,7,6,0,4,3,2,1],
      [6,5,9,8,7,1,0,4,3,2],
      [7,6,5,9,8,2,1,0,4,3],
      [8,7,6,5,9,3,2,1,0,4],
      [9,8,7,6,5,4,3,2,1,0]
    ];
    const verhoeffP = [
      [0,1,2,3,4,5,6,7,8,9],
      [1,5,7,6,2,8,3,0,9,4],
      [5,8,0,3,7,9,6,1,4,2],
      [8,9,1,6,0,4,3,5,2,7],
      [9,4,5,3,1,2,6,8,7,0],
      [4,2,8,6,5,7,3,9,0,1],
      [2,7,9,3,8,0,6,4,1,5],
      [7,0,4,6,9,1,3,2,5,8]
    ];
    const verhoeffInv = [0,4,3,2,1,5,6,7,8,9];

    function verhoeffCheck(num) {
      let c = 0;
      let numArr = num.split('').reverse().map(Number);
      for (let i = 0; i < numArr.length; i++) {
        c = verhoeffD[c][verhoeffP[i % 8][numArr[i]]];
      }
      return c === 0;
    }

    function generateVerhoeff() {
      let bin = document.getElementById("binVerhoeff").value;
      let cantidad = parseInt(document.getElementById("cantidadVerhoeff").value);
      let resultado = [];

      for (let i = 0; i < cantidad; i++) {
        let num = bin;
        while (num.includes('x')) {
          num = num.replace('x', Math.floor(Math.random() * 10));
        }
        if (verhoeffCheck(num)) {
          resultado.push(num + generateRandomDate());
        } else {
          i--;
        }
      }
      document.getElementById("resultadoVerhoeff").value = resultado.join('\n');
    }
  </script>
</body>
</html>
